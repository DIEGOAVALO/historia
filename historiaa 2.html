<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HistorIA</title>
  <style>
    :root {
      --primary: #6e00ff;
      --primary-dark: #4b00b0;
      --secondary: #9d4edd;
      --accent: #ff6b6b;
      --accent-dark: #e05555;
      --text: #ffffff;
      --text-light: rgba(255, 255, 255, 0.8);
      --bg-dark: #1a1a2e;
      --bg-darker: #0d0d1a;
      --correct: #4cd137;
      --correct-dark: #3aa822;
      --incorrect: #e84118;
      --incorrect-dark: #c73212;
      --gold: #ffd700;
      --silver: #c0c0c0;
      --bronze: #cd7f32;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    @font-face {
      font-family: 'Poppins';
      src: url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
    }
    
    body {
      background: linear-gradient(135deg, var(--bg-darker), var(--bg-dark));
      color: var(--text);
      min-height: 100vh;
      padding: 20px;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background-image: 
        radial-gradient(circle at 10% 20%, rgba(110, 0, 255, 0.1) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, rgba(157, 78, 221, 0.1) 0%, transparent 20%);
    }
    
    .container {
      max-width: 900px;
      width: 100%;
      background: rgba(26, 26, 46, 0.8);
      backdrop-filter: blur(12px);
      border-radius: 24px;
      padding: 40px;
      box-shadow: 
        0 10px 25px rgba(0, 0, 0, 0.3),
        0 0 30px rgba(110, 0, 255, 0.2);
      margin: 20px 0;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    .container::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent));
      z-index: -1;
      border-radius: 25px;
      opacity: 0.3;
      animation: borderGlow 8s linear infinite;
      background-size: 400% 400%;
    }
    
    @keyframes borderGlow {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    h1 {
      font-size: 3rem;
      background: linear-gradient(to right, var(--accent), var(--secondary));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin-bottom: 10px;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      font-weight: 700;
      letter-spacing: 1px;
    }
    
    h2 {
      font-size: 1.8rem;
      margin: 15px 0;
      color: var(--text);
      font-weight: 600;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
    
    h3 {
      font-size: 1.3rem;
      margin: 10px 0;
      color: var(--text-light);
      font-weight: 400;
    }
    
    p {
      color: var(--text-light);
      line-height: 1.6;
      margin-bottom: 15px;
    }
    
    #inicio, #juego, #final, #categorias, #configuracion { 
      display: none; 
      animation: fadeIn 0.6s cubic-bezier(0.22, 1, 0.36, 1);
    }
    
    #inicio {
      display: block;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
      20%, 40%, 60%, 80% { transform: translateX(5px); }
    }
    
    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }
    
    input, select, button {
      padding: 14px 20px;
      margin: 12px 0;
      border-radius: 50px;
      border: none;
      font-size: 1rem;
      width: 100%;
      max-width: 350px;
      background: rgba(255, 255, 255, 0.08);
      color: var(--text);
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    input:focus, select:focus {
      outline: none;
      box-shadow: 0 0 0 2px var(--secondary);
      background: rgba(255, 255, 255, 0.12);
    }
    
    button {
      background: linear-gradient(135deg, var(--accent), var(--accent-dark));
      color: white;
      font-weight: 600;
      cursor: pointer;
      margin-top: 25px;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      font-size: 0.95rem;
      box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
    }
    
    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 7px 20px rgba(255, 107, 107, 0.4);
      background: linear-gradient(135deg, var(--accent-dark), var(--accent));
    }
    
    button:active {
      transform: translateY(1px);
    }
    
    button:disabled {
      background: rgba(204, 204, 204, 0.5);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    .btn-secondary {
      background: linear-gradient(135deg, var(--secondary), var(--primary-dark));
      box-shadow: 0 4px 15px rgba(110, 0, 255, 0.3);
    }
    
    .btn-secondary:hover {
      background: linear-gradient(135deg, var(--primary-dark), var(--secondary));
      box-shadow: 0 7px 20px rgba(110, 0, 255, 0.4);
    }
    
    .avatar-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
      gap: 15px;
      margin: 25px 0;
    }
    
    .avatar {
      font-size: 42px;
      cursor: pointer;
      padding: 15px;
      border-radius: 18px;
      background: rgba(255, 255, 255, 0.08);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      aspect-ratio: 1/1;
    }
    
    .avatar:hover {
      transform: scale(1.1);
      background: rgba(255, 255, 255, 0.15);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    
    .selected {
      border: 3px solid var(--accent);
      box-shadow: 
        0 0 20px var(--accent),
        0 0 30px rgba(255, 107, 107, 0.3);
      transform: scale(1.1);
      animation: pulse 2s infinite;
    }
    
    #pregunta {
      font-size: 1.4rem;
      margin: 25px 0;
      min-height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      background: rgba(0, 0, 0, 0.25);
      border-radius: 18px;
      line-height: 1.5;
      position: relative;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    #pregunta::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(to right, var(--primary), var(--secondary));
    }
    
    .categoria-tag {
      position: absolute;
      top: -12px;
      left: 20px;
      background: var(--secondary);
      padding: 3px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    
    .respuestas-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
      margin: 25px 0;
    }
    
    @media (min-width: 600px) {
      .respuestas-grid {
        grid-template-columns: 1fr 1fr;
      }
    }
    
    .respuesta {
      padding: 18px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.05);
      text-align: left;
      display: flex;
      align-items: center;
    }
    
    .respuesta::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: var(--secondary);
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .respuesta:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    
    .respuesta:hover::before {
      opacity: 1;
    }
    
    .respuesta.correcta {
      background: rgba(76, 209, 55, 0.15);
      box-shadow: 0 0 20px rgba(76, 209, 55, 0.3);
      animation: pulse 0.5s;
      border-color: var(--correct);
    }
    
    .respuesta.correcta::before {
      background: var(--correct);
      opacity: 1;
    }
    
    .respuesta.incorrecta {
      background: rgba(232, 65, 24, 0.15);
      border-color: var(--incorrect);
      animation: shake 0.5s;
    }
    
    .respuesta.incorrecta::before {
      background: var(--incorrect);
      opacity: 1;
    }
    
    .letra-respuesta {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 30px;
      height: 30px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      margin-right: 15px;
      font-weight: bold;
      flex-shrink: 0;
    }
    
    .respuesta.correcta .letra-respuesta {
      background: var(--correct-dark);
    }
    
    .respuesta.incorrecta .letra-respuesta {
      background: var(--incorrect-dark);
    }
    
    #temporizador-container {
      width: 100%;
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      margin: 25px 0 15px;
      overflow: hidden;
      position: relative;
    }
    
    #temporizador-bar {
      height: 100%;
      width: 100%;
      background: linear-gradient(to right, var(--accent), var(--secondary));
      transition: width 0.1s linear;
      position: relative;
    }
    
    #temporizador-bar::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      width: 5px;
      background: white;
      box-shadow: 0 0 10px white;
    }
    
    #temporizador-text {
      font-size: 1.1rem;
      margin-top: 8px;
      color: var(--text-light);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    #temporizador-text svg {
      margin-right: 8px;
    }
    
    .puntajes-container {
      display: flex;
      justify-content: center;
      gap: 25px;
      flex-wrap: wrap;
      margin: 25px 0;
    }
    
    .jugador-puntaje {
      background: rgba(0, 0, 0, 0.3);
      padding: 20px;
      border-radius: 18px;
      min-width: 180px;
      transition: all 0.3s ease;
      position: relative;
      border: 1px solid rgba(255, 255, 255, 0.05);
      text-align: left;
    }
    
    .jugador-puntaje.leader {
      border: 2px solid var(--gold);
      box-shadow: 0 0 25px var(--gold);
      transform: scale(1.05);
      background: rgba(0, 0, 0, 0.4);
    }
    
    .jugador-puntaje.leader::before {
      content: '🥇';
      position: absolute;
      top: -15px;
      left: -15px;
      font-size: 1.5rem;
      background: var(--bg-dark);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid var(--gold);
    }
    
    .jugador-puntaje:nth-child(2).leader::before {
      content: '🥈';
      border-color: var(--silver);
    }
    
    .jugador-puntaje:nth-child(3).leader::before {
      content: '🥉';
      border-color: var(--bronze);
    }
    
    .jugador-avatar {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }
    
    .jugador-nombre {
      font-weight: 600;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
    }
    
    .jugador-puntos {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent);
    }
    
    .categoria-btn {
      padding: 18px;
      margin: 12px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
      border: 1px solid rgba(255, 255, 255, 0.05);
      min-width: 150px;
    }
    
    .categoria-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    
    .categoria-btn.selected {
      background: linear-gradient(135deg, var(--secondary), var(--primary-dark));
      box-shadow: 0 5px 20px rgba(110, 0, 255, 0.3);
      border-color: var(--secondary);
    }
    
    #categorias-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin: 20px 0;
    }
    
    #resultado {
      min-height: 40px;
      font-size: 1.3rem;
      margin: 20px 0;
      padding: 15px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .correct-message {
      background: rgba(76, 209, 55, 0.15);
      color: var(--correct);
      border: 1px solid var(--correct);
    }
    
    .incorrect-message {
      background: rgba(232, 65, 24, 0.15);
      color: var(--incorrect);
      border: 1px solid var(--incorrect);
    }
    
    .progress-container {
      width: 100%;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      margin: 25px 0;
      overflow: hidden;
      height: 10px;
      position: relative;
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(to right, var(--primary), var(--secondary));
      width: 0%;
      transition: width 0.5s ease;
      position: relative;
    }
    
    .progress-bar::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      width: 5px;
      background: white;
      box-shadow: 0 0 10px white;
    }
    
    #pregunta-progreso {
      margin-top: 10px;
      font-size: 1rem;
      color: var(--text-light);
      display: flex;
      justify-content: space-between;
    }
    
    .confetti {
      position: absolute;
      width: 12px;
      height: 12px;
      background-color: var(--accent);
      border-radius: 50%;
      animation: confetti-fall 5s linear forwards;
      z-index: 10;
    }
    
    @keyframes confetti-fall {
      0% {
        transform: translateY(-100px) rotate(0deg) scale(1);
        opacity: 1;
      }
      100% {
        transform: translateY(1000px) rotate(720deg) scale(0.5);
        opacity: 0;
      }
    }
    
    .modo-info {
      font-size: 0.95rem;
      margin-top: 8px;
      color: var(--text-light);
      padding: 10px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      border-left: 3px solid var(--secondary);
    }
    
    .tab-container {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .tab {
      padding: 12px 25px;
      cursor: pointer;
      position: relative;
      font-weight: 600;
      color: var(--text-light);
      transition: all 0.3s ease;
    }
    
    .tab.active {
      color: var(--accent);
    }
    
    .tab.active::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--accent);
      border-radius: 3px 3px 0 0;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .powerup-container {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    
    .powerup {
      background: rgba(255, 255, 255, 0.08);
      border-radius: 15px;
      padding: 15px;
      width: 100px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    .powerup:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-3px);
    }
    
    .powerup-icon {
      font-size: 2rem;
      margin-bottom: 10px;
    }
    
    .powerup-name {
      font-size: 0.9rem;
      font-weight: 600;
    }
    
    .powerup-cooldown {
      font-size: 0.8rem;
      color: var(--text-light);
      margin-top: 5px;
    }
    
    .final-podium {
      display: flex;
      justify-content: center;
      align-items: flex-end;
      margin: 30px 0;
      gap: 20px;
      height: 250px;
    }
    
    .podium-place {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 120px;
    }
    
    .podium-stand {
      width: 100%;
      background: linear-gradient(to bottom, var(--primary), var(--primary-dark));
      border-radius: 8px 8px 0 0;
      position: relative;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    
    .podium-stand::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 10px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 8px 8px 0 0;
    }
    
    .first-place {
      height: 200px;
      background: linear-gradient(to bottom, var(--gold), #daa520);
    }
    
    .second-place {
      height: 150px;
      background: linear-gradient(to bottom, var(--silver), #a8a8a8);
    }
    
    .third-place {
      height: 100px;
      background: linear-gradient(to bottom, var(--bronze), #b87333);
    }
    
    .podium-player {
      margin-top: 15px;
      text-align: center;
    }
    
    .podium-avatar {
      font-size: 2.5rem;
    }
    
    .podium-name {
      font-weight: 600;
      margin-top: 5px;
    }
    
    .podium-points {
      color: var(--accent);
      font-weight: 700;
    }
    
    .medal {
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 2.5rem;
    }
    
    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }
    
    .stat-card {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 15px;
      padding: 20px;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    .stat-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--accent);
      margin: 10px 0;
    }
    
    .stat-label {
      color: var(--text-light);
      font-size: 0.9rem;
    }
    
    .floating {
      animation: float 3s ease-in-out infinite;
    }
    
    .shake {
      animation: shake 0.5s;
    }
    
    .explicacion {
      margin-top: 10px;
      font-size: 0.9rem;
      color: var(--text-light);
      padding: 8px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 8px;
      border-left: 3px solid var(--correct);
    }
    
    .bot-thinking {
      position: relative;
      padding-left: 25px;
    }
    
    .bot-thinking::before {
      content: '...';
      position: absolute;
      left: 5px;
      animation: botThinking 1.5s infinite;
    }
    
    @keyframes botThinking {
      0% { content: '.'; }
      33% { content: '..'; }
      66% { content: '...'; }
    }
    
    .nivel-dificultad {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-left: 8px;
    }
    
    .facil { background: rgba(76, 209, 55, 0.2); color: var(--correct); }
    .medio { background: rgba(255, 193, 7, 0.2); color: #ffc107; }
    .dificil { background: rgba(255, 107, 107, 0.2); color: var(--accent); }
    .extremo { background: rgba(156, 39, 176, 0.2); color: #9c27b0; }
    
    .boton-volver {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .boton-volver:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateX(-3px);
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .container {
        padding: 25px;
      }
      
      h1 {
        font-size: 2.2rem;
      }
      
      .avatar-grid {
        grid-template-columns: repeat(4, 1fr);
      }
      
      .puntajes-container {
        flex-direction: column;
        align-items: center;
      }
      
      .jugador-puntaje {
        width: 100%;
        max-width: 250px;
      }
      
      .final-podium {
        height: auto;
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }
      
      .podium-place {
        flex-direction: row;
        width: 100%;
        max-width: 300px;
        align-items: flex-end;
        gap: 15px;
      }
      
      .podium-stand {
        width: 60px;
        height: 100px !important;
      }
      
      .podium-player {
        margin-top: 0;
        text-align: left;
        flex: 1;
      }
      
      .medal {
        top: 50%;
        left: 30px;
        transform: translateY(-50%);
      }
      
      .boton-volver {
        top: 10px;
        left: 10px;
        width: 35px;
        height: 35px;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    <button class="boton-volver" onclick="volverAlInicio()" style="display: none;">←</button>
    
    <div id="inicio">
      <h1 class="floating">HistorIA</h1>
      <p>El juego de trivia cultural más desafiante</p>
      
      <div class="tab-container">
        <div class="tab active" onclick="cambiarTab('jugador')">Jugador</div>
        <div class="tab" onclick="cambiarTab('config')">Configuración</div>
      </div>
      
      <div class="tab-content active" id="tab-jugador">
        <input type="text" id="nombre" placeholder="Tu nombre de jugador" maxlength="15">
        
        <h3>Elige tu avatar:</h3>
        <div class="avatar-grid" id="avatares">
          <span class="avatar" onclick="seleccionarAvatar('🦊')">🦊</span>
          <span class="avatar" onclick="seleccionarAvatar('🐵')">🐵</span>
          <span class="avatar" onclick="seleccionarAvatar('🐯')">🐯</span>
          <span class="avatar" onclick="seleccionarAvatar('🦁')">🦁</span>
          <span class="avatar" onclick="seleccionarAvatar('🐲')">🐲</span>
          <span class="avatar" onclick="seleccionarAvatar('🦄')">🦄</span>
          <span class="avatar" onclick="seleccionarAvatar('🐙')">🐙</span>
          <span class="avatar" onclick="seleccionarAvatar('🦋')">🦋</span>
        </div>
        
        <button onclick="mostrarSeleccionCategorias()" class="btn-secondary">Continuar</button>
      </div>
      
      <div class="tab-content" id="tab-config">
        <h3>Dificultad:</h3>
        <select id="dificultad">
          <option value="facil">Fácil</option>
          <option value="medio" selected>Medio</option>
          <option value="dificil">Difícil</option>
          <option value="extremo">Extremo</option>
        </select>
        
        <h3>Número de bots:</h3>
        <select id="num-bots">
          <option value="1">1 Bot</option>
          <option value="2" selected>2 Bots</option>
          <option value="3">3 Bots</option>
          <option value="4">4 Bots</option>
        </select>
        
        <h3>Velocidad del juego:</h3>
        <select id="velocidad">
          <option value="lento">Lento</option>
          <option value="normal" selected>Normal</option>
          <option value="rapido">Rápido</option>
        </select>
        
        <button onclick="mostrarSeleccionCategorias()" class="btn-secondary">Guardar</button>
      </div>
    </div>

    <div id="categorias">
      <h2>Elige tus categorías</h2>
      <p>Selecciona al menos 3 categorías para personalizar tu juego</p>
      <div id="categorias-container"></div>
      
      <h3>Modo de juego:</h3>
      <select id="modo">
        <option value="clasico">Clásico (10 preguntas)</option>
        <option value="contrarreloj">Contrarreloj (15 seg/pregunta)</option>
        <option value="robo">Robo de puntos</option>
        <option value="suddenDeath">Muerte súbita (1 error = fin)</option>
        <option value="supervivencia">Supervivencia (hasta fallar)</option>
        <option value="duelo">Duelo de sabios (1 vs 1)</option>
        <option value="equipos">Modo equipos (2 vs 2)</option>
      </select>
      <div class="modo-info" id="modo-info">Responde correctamente 10 preguntas. Gana quien más puntos tenga.</div>
      
      <button id="iniciar-juego-btn" onclick="iniciarJuego()" disabled>¡Comenzar Juego!</button>
    </div>

    <div id="juego">
      <div class="progress-container">
        <div class="progress-bar" id="pregunta-progreso-bar"></div>
        <div id="pregunta-progreso">Pregunta 1 de 10</div>
      </div>
      
      <div class="puntajes-container" id="puntajes"></div>
      
      <div id="pregunta">
        <div class="categoria-tag">Historia</div>
      </div>
      <div class="respuestas-grid" id="respuestas"></div>
      
      <div id="temporizador-container">
        <div id="temporizador-bar"></div>
        <div id="temporizador-text">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
          <span id="tiempo-texto">15s</span>
        </div>
      </div>
      
      <div id="resultado"></div>
      
      <div class="powerup-container" id="powerups">
        <div class="powerup" onclick="usarPowerup('tiempo-extra')">
          <div class="powerup-icon">⏱️</div>
          <div class="powerup-name">Tiempo Extra</div>
          <div class="powerup-cooldown">Disponible</div>
        </div>
        <div class="powerup" onclick="usarPowerup('doble-puntos')">
          <div class="powerup-icon">✌️</div>
          <div class="powerup-name">Doble Puntos</div>
          <div class="powerup-cooldown">Disponible</div>
        </div>
        <div class="powerup" onclick="usarPowerup('excluir')">
          <div class="powerup-icon">❌</div>
          <div class="powerup-name">Excluir 1</div>
          <div class="powerup-cooldown">Disponible</div>
        </div>
      </div>
    </div>

    <div id="final">
      <h2>🏆 ¡Juego Terminado! 🏆</h2>
      
      <div class="final-podium" id="podium"></div>
      
      <div class="stats-container">
        <div class="stat-card">
          <div class="stat-label">Preguntas totales</div>
          <div class="stat-value" id="stats-preguntas">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Tu precisión</div>
          <div class="stat-value" id="stats-precision">0%</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Puntos máximos</div>
          <div class="stat-value" id="stats-max-puntos">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Tiempo promedio</div>
          <div class="stat-value" id="stats-tiempo">0s</div>
        </div>
      </div>
      
      <button onclick="reiniciarJuego()">Jugar de nuevo</button>
      <button onclick="volverAlInicio()" class="btn-secondary">Menú principal</button>
    </div>
  </div>

  <audio id="correct-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3"></audio>
  <audio id="incorrect-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3"></audio>
  <audio id="win-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>
  <audio id="lose-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-sad-game-over-trombone-471.mp3"></audio>
  <audio id="powerup-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3"></audio>
  <audio id="countdown-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-fast-countdown-922.mp3"></audio>

<script>
  // Variables del juego
  let jugadores = [];
  let puntajes = {};
  let avatarSeleccionado = "";
  let modoJuego = "clasico";
  let dificultad = "medio";
  let numBots = 2;
  let velocidadJuego = "normal";
  let temporizador;
  let tiempoRestante = 15;
  let tiempoTotal = 15;
  let preguntas = [];
  let preguntasMostradas = [];
  let preguntaActual = null;
  let indexPregunta = 0;
  let totalPreguntas = 10;
  let categoriasSeleccionadas = [];
  let jugadorHumano = null;
  let stats = {
    preguntasTotales: 0,
    respuestasCorrectas: 0,
    tiempoTotal: 0,
    powerupsUsados: 0
  };
  let powerups = {
    'tiempo-extra': { disponible: true, cooldown: 3 },
    'doble-puntos': { disponible: true, cooldown: 5 },
    'excluir': { disponible: true, cooldown: 4 }
  };
  let usandoDoblePuntos = false;
  let tiempoInicioPregunta = 0;
  let equipos = [];
  
  // Base de datos de preguntas por categoría y dificultad
  const bancoPreguntas = {
    historia: {
      facil: [
        { q: "¿En qué año cayó el muro de Berlín?", a: ["1985", "1989", "1991"], correcta: 1, explicacion: "El Muro de Berlín cayó el 9 de noviembre de 1989, marcando el inicio de la reunificación alemana." },
        { q: "¿Quién descubrió América?", a: ["Cristóbal Colón", "Vasco da Gama", "Fernando de Magallanes"], correcta: 0, explicacion: "Cristóbal Colón llegó a América el 12 de octubre de 1492, aunque creía haber llegado a las Indias." }
      ],
      medio: [
        { q: "¿Qué civilización construyó Machu Picchu?", a: ["Azteca", "Maya", "Inca"], correcta: 2, explicacion: "Machu Picchu fue construido por los incas en el siglo XV como residencia del emperador Pachacútec." },
        { q: "¿En qué año comenzó la Segunda Guerra Mundial?", a: ["1939", "1941", "1945"], correcta: 0, explicacion: "La Segunda Guerra Mundial comenzó el 1 de septiembre de 1939 con la invasión alemana de Polonia." }
      ],
      dificil: [
        { q: "¿Quién fue el primer presidente de Argentina?", a: ["Bernardino Rivadavia", "Domingo Faustino Sarmiento", "Bartolomé Mitre"], correcta: 0, explicacion: "Bernardino Rivadavia fue el primer presidente argentino en 1826, aunque en ese momento el país se llamaba Provincias Unidas del Río de la Plata." },
        { q: "¿Qué emperador romano dividió el imperio en Oriente y Occidente?", a: ["Constantino", "Teodosio", "Juliano"], correcta: 1, explicacion: "Teodosio I dividió el Imperio Romano entre sus dos hijos en el año 395 d.C., marcando el inicio del Imperio Romano de Occidente y Oriente." }
      ],
      extremo: [
        { q: "¿En qué año se firmó el Tratado de Tordesillas?", a: ["1492", "1494", "1498"], correcta: 1, explicacion: "El Tratado de Tordesillas se firmó el 7 de junio de 1494, dividiendo el mundo descubierto y por descubrir entre España y Portugal." },
        { q: "¿Qué batalla marcó el fin de Napoleón Bonaparte?", a: ["Waterloo", "Austerlitz", "Trafalgar"], correcta: 0, explicacion: "La Batalla de Waterloo (18 de junio de 1815) fue la derrota definitiva de Napoleón frente a las fuerzas aliadas." }
      ]
    },
    geografia: {
      facil: [
        { q: "¿Cuál es el río más largo del mundo?", a: ["Nilo", "Amazonas", "Yangtsé"], correcta: 1, explicacion: "El río Amazonas es el más largo con aproximadamente 7,062 km, superando al Nilo que tiene 6,650 km." },
        { q: "¿Cuál es la capital de Francia?", a: ["Berlín", "París", "Madrid"], correcta: 1, explicacion: "París es la capital de Francia y una de las ciudades más visitadas del mundo." }
      ],
      medio: [
        { q: "¿Qué país tiene forma de bota?", a: ["Grecia", "Italia", "Portugal"], correcta: 1, explicacion: "Italia es conocida por su característica forma de bota que se extiende hacia el mar Mediterráneo." },
        { q: "¿Dónde se encuentra el desierto del Sahara?", a: ["Asia", "África", "América del Sur"], correcta: 1, explicacion: "El Sahara es el desierto cálido más grande del mundo y ocupa gran parte del norte de África." }
      ],
      dificil: [
        { q: "¿Qué país no tiene costa en el mar Caribe?", a: ["Nicaragua", "El Salvador", "Honduras"], correcta: 1, explicacion: "El Salvador es el único país de Centroamérica que no tiene costa en el Caribe, solo en el Pacífico." },
        { q: "¿Cuál es el lago más profundo del mundo?", a: ["Lago Titicaca", "Lago Baikal", "Lago Victoria"], correcta: 1, explicacion: "El lago Baikal en Rusia tiene una profundidad máxima de 1,642 metros y contiene el 20% del agua dulce no congelada del mundo." }
      ],
      extremo: [
        { q: "¿Qué país tiene más husos horarios?", a: ["Rusia", "Estados Unidos", "Francia"], correcta: 2, explicacion: "Francia tiene 12 husos horarios debido a sus territorios de ultramar, seguida de Rusia con 11." },
        { q: "¿Cuál es el punto más bajo de la Tierra en tierra firme?", a: ["Fosa de las Marianas", "Mar Muerto", "Valle de la Muerte"], correcta: 1, explicacion: "La costa del Mar Muerto está a aproximadamente 430 metros bajo el nivel del mar, el punto más bajo en tierra firme." }
      ]
    },
    arte: {
      facil: [
        { q: "¿Quién pintó 'La noche estrellada'?", a: ["Picasso", "Van Gogh", "Dalí"], correcta: 1, explicacion: "Vincent van Gogh pintó 'La noche estrellada' en 1889 durante su estancia en un asilo en Saint-Rémy-de-Provence." },
        { q: "¿Quién pintó 'La Mona Lisa'?", a: ["Miguel Ángel", "Leonardo da Vinci", "Rafael"], correcta: 1, explicacion: "Leonardo da Vinci pintó el retrato de Lisa Gherardini, conocido como 'La Mona Lisa' o 'La Gioconda', entre 1503 y 1519." }
      ],
      medio: [
        { q: "¿Qué artista cortó su propia oreja?", a: ["Pablo Picasso", "Vincent van Gogh", "Salvador Dalí"], correcta: 1, explicacion: "Van Gogh se cortó parte de su oreja izquierda en 1888 durante un episodio de crisis emocional." },
        { q: "¿Qué movimiento artístico lideró Salvador Dalí?", a: ["Cubismo", "Surrealismo", "Impresionismo"], correcta: 1, explicacion: "Salvador Dalí fue una de las figuras más importantes del surrealismo, conocido por sus imágenes oníricas y simbólicas." }
      ],
      dificil: [
        { q: "¿Quién pintó 'El grito'?", a: ["Edvard Munch", "Paul Gauguin", "Henri Matisse"], correcta: 0, explicacion: "Edvard Munch pintó 'El grito' en 1893 como parte de su serie 'El friso de la vida', que explora temas de amor, ansiedad y muerte." },
        { q: "¿Qué artista mexicano pintó 'Vendedora de flores'?", a: ["Diego Rivera", "Frida Kahlo", "David Alfaro Siqueiros"], correcta: 0, explicacion: "Diego Rivera, famoso por sus murales, también pintó obras de caballete como 'Vendedora de flores' que reflejan su interés por el pueblo mexicano." }
      ],
      extremo: [
        { q: "¿En qué museo se encuentra 'La ronda de noche' de Rembrandt?", a: ["Louvre", "Rijksmuseum", "Museo del Prado"], correcta: 1, explicacion: "'La ronda de noche' (1642) de Rembrandt es una de las obras maestras del Rijksmuseum en Ámsterdam." },
        { q: "¿Qué técnica usó Miguel Ángel para pintar la Capilla Sixtina?", a: ["Óleo", "Temple", "Fresco"], correcta: 2, explicacion: "Miguel Ángel pintó los frescos de la Capilla Sixtina entre 1508-1512, una técnica donde se pinta sobre yeso fresco para que los colores se integren permanentemente." }
      ]
    },
    ciencia: {
      facil: [
        { q: "¿Qué planeta es conocido como el 'planeta rojo'?", a: ["Venus", "Marte", "Júpiter"], correcta: 1, explicacion: "Marte es conocido como el planeta rojo debido al óxido de hierro (herrumbre) en su superficie." },
        { q: "¿Cuál es el hueso más largo del cuerpo humano?", a: ["Fémur", "Tibia", "Húmero"], correcta: 0, explicacion: "El fémur (hueso del muslo) es el hueso más largo del cuerpo humano, representando aproximadamente 1/4 de la altura de una persona." }
      ],
      medio: [
        { q: "¿Qué científico formuló la teoría de la relatividad?", a: ["Isaac Newton", "Albert Einstein", "Stephen Hawking"], correcta: 1, explicacion: "Albert Einstein publicó la teoría de la relatividad especial en 1905 y la teoría de la relatividad general en 1915." },
        { q: "¿Qué elemento químico tiene el símbolo 'Au'?", a: ["Plata", "Oro", "Aluminio"], correcta: 1, explicacion: "El símbolo 'Au' viene del latín 'aurum' que significa oro. La plata es 'Ag' (argentum) y el aluminio 'Al'." }
      ],
      dificil: [
        { q: "¿Qué científico descubrió la penicilina?", a: ["Louis Pasteur", "Alexander Fleming", "Marie Curie"], correcta: 1, explicacion: "Alexander Fleming descubrió la penicilina en 1928 por accidente cuando observó que un hongo (Penicillium) inhibía el crecimiento bacteriano." },
        { q: "¿Cuál es la velocidad de la luz en el vacío?", a: ["300,000 km/s", "150,000 km/s", "450,000 km/s"], correcta: 0, explicacion: "La velocidad de la luz en el vacío es exactamente 299,792.458 km/s, pero normalmente se redondea a 300,000 km/s." }
      ],
      extremo: [
        { q: "¿Qué premio Nobel no recibió Marie Curie?", a: ["Física", "Química", "Medicina"], correcta: 2, explicacion: "Marie Curie ganó el Nobel de Física (1903) por su trabajo en radiactividad y el de Química (1911) por descubrir el radio y el polonio, pero no el de Medicina." },
        { q: "¿Qué porcentaje del ADN humano coincide con el de un chimpancé?", a: ["85%", "95%", "99%"], correcta: 2, explicacion: "Los humanos comparten aproximadamente el 99% de su ADN con los chimpancés, nuestros parientes vivos más cercanos." }
      ]
    },
    deportes: {
      facil: [
        { q: "¿Qué país ganó el primer Mundial de Fútbol?", a: ["Brasil", "Uruguay", "Italia"], correcta: 1, explicacion: "Uruguay ganó el primer Mundial de Fútbol en 1930, que organizó y donde venció a Argentina 4-2 en la final." },
        { q: "¿En qué deporte se usa un bate?", a: ["Fútbol", "Béisbol", "Tenis"], correcta: 1, explicacion: "El béisbol es un deporte donde los bateadores golpean la pelota lanzada con un bate para anotar carreras." }
      ],
      medio: [
        { q: "¿Cuántos jugadores hay en un equipo de baloncesto?", a: ["5", "6", "7"], correcta: 0, explicacion: "En baloncesto, cada equipo tiene 5 jugadores en la cancha: base, escolta, alero, ala-pívot y pívot." },
        { q: "¿Qué tenista tiene más títulos de Grand Slam?", a: ["Rafael Nadal", "Roger Federer", "Novak Djokovic"], correcta: 2, explicacion: "Novak Djokovic ostenta el récord de más títulos de Grand Slam en individuales masculinos con 24 (hasta 2023)." }
      ],
      dificil: [
        { q: "¿En qué año se celebraron los primeros Juegos Olímpicos modernos?", a: ["1886", "1896", "1904"], correcta: 1, explicacion: "Los primeros Juegos Olímpicos modernos se celebraron en Atenas en 1896, revividos por Pierre de Coubertin." },
        { q: "¿Qué país ha ganado más Copas del Mundo de Fútbol?", a: ["Alemania", "Brasil", "Italia"], correcta: 1, explicacion: "Brasil ha ganado 5 Copas del Mundo (1958, 1962, 1970, 1994, 2002), más que cualquier otro país." }
      ],
      extremo: [
        { q: "¿Quién es el máximo goleador en la historia de la NBA?", a: ["Kareem Abdul-Jabbar", "LeBron James", "Michael Jordan"], correcta: 0, explicacion: "Kareem Abdul-Jabbar anotó 38,387 puntos en su carrera, aunque LeBron James lo superó en 2023." },
        { q: "¿Qué nadador tiene más medallas olímpicas?", a: ["Michael Phelps", "Mark Spitz", "Ryan Lochte"], correcta: 0, explicacion: "Michael Phelps tiene 28 medallas olímpicas (23 de oro), el máximo en la historia de los Juegos Olímpicos." }
      ]
    },
    cultura: {
      facil: [
        { q: "¿Dónde se originó el sushi?", a: ["China", "Japón", "Corea"], correcta: 1, explicacion: "El sushi se originó en Japón como método de conservación del pescado con arroz fermentado, evolucionando a su forma actual en el siglo XIX." },
        { q: "¿Qué instrumento tiene cuerdas y se toca con arco?", a: ["Guitarra", "Violín", "Piano"], correcta: 1, explicacion: "El violín es un instrumento de cuerda frotada que se toca con un arco, a diferencia de la guitarra que se puntea." }
      ],
      medio: [
        { q: "¿Qué escritor creó 'Don Quijote de la Mancha'?", a: ["Miguel de Cervantes", "Gabriel García Márquez", "Pablo Neruda"], correcta: 0, explicacion: "Miguel de Cervantes publicó 'El ingenioso hidalgo Don Quijote de la Mancha' en 1605, considerada la primera novela moderna." },
        { q: "¿En qué país nació el tango?", a: ["Brasil", "Argentina", "México"], correcta: 1, explicacion: "El tango surgió a finales del siglo XIX en la región del Río de la Plata (Argentina y Uruguay), especialmente en Buenos Aires." }
      ],
      dificil: [
        { q: "¿Qué filósofo dijo 'Pienso, luego existo'?", a: ["Platón", "Aristóteles", "Descartes"], correcta: 2, explicacion: "René Descartes formuló el famoso principio 'Cogito, ergo sum' (Pienso, luego existo) como fundamento del conocimiento cierto." },
        { q: "¿Qué escritor chileno ganó el Premio Nobel de Literatura en 1971?", a: ["Gabriel García Márquez", "Pablo Neruda", "Mario Vargas Llosa"], correcta: 1, explicacion: "Pablo Neruda recibió el Nobel de Literatura en 1971 por su poesía que 'da vida al destino y los sueños de un continente'." }
      ],
      extremo: [
        { q: "¿Qué obra literaria comienza con 'Muchos años después, frente al pelotón de fusilamiento...'?", a: ["Cien años de soledad", "Pedro Páramo", "La ciudad y los perros"], correcta: 0, explicacion: "Esta es la famosa primera línea de 'Cien años de soledad' de Gabriel García Márquez, publicada en 1967." },
        { q: "¿Quién compuso la 'Sinfonía del Nuevo Mundo'?", a: ["Ludwig van Beethoven", "Antonín Dvořák", "Wolfgang Amadeus Mozart"], correcta: 1, explicacion: "Antonín Dvořák compuso la Sinfonía nº9 'Del Nuevo Mundo' en 1893 durante su estancia en Estados Unidos, incorporando influencias de la música nativa americana y espirituales negros." }
      ]
    },
    tecnologia: {
      facil: [
        { q: "¿Qué compañía creó el iPhone?", a: ["Samsung", "Apple", "Google"], correcta: 1, explicacion: "Apple lanzó el primer iPhone en 2007, revolucionando la industria de los teléfonos inteligentes." },
        { q: "¿Qué red social es conocida por sus posts de 280 caracteres?", a: ["Facebook", "Twitter (X)", "Instagram"], correcta: 1, explicacion: "Twitter (ahora X) fue pionera en los mensajes cortos, originalmente limitados a 140 caracteres y luego extendidos a 280." }
      ],
      medio: [
        { q: "¿Qué significa 'www' en las direcciones web?", a: ["World Wide Web", "Web World Wide", "Wide Web World"], correcta: 0, explicacion: "'WWW' significa World Wide Web, el sistema de documentos hipertextuales accesibles a través de Internet." },
        { q: "¿Qué lenguaje de programación se usa principalmente para desarrollo web frontend?", a: ["Python", "JavaScript", "Java"], correcta: 1, explicacion: "JavaScript es el lenguaje principal para desarrollo web frontend, ejecutándose en los navegadores para hacer páginas interactivas." }
      ],
      dificil: [
        { q: "¿Qué compañía desarrolló el sistema operativo Android?", a: ["Google", "Android Inc.", "Microsoft"], correcta: 1, explicacion: "Android fue desarrollado originalmente por Android Inc., compañía que Google compró en 2005." },
        { q: "¿Qué protocolo asegura las conexiones web (https)?", a: ["SSL/TLS", "FTP", "HTTP"], correcta: 0, explicacion: "SSL (Secure Sockets Layer) y su sucesor TLS (Transport Layer Security) son los protocolos que cifran las conexiones HTTPS." }
      ],
      extremo: [
        { q: "¿Qué año se envió el primer email?", a: ["1969", "1971", "1983"], correcta: 1, explicacion: "Ray Tomlinson envió el primer email en 1971, usando el símbolo @ para separar el nombre del usuario y la máquina." },
        { q: "¿Qué científico es considerado el padre de la inteligencia artificial?", a: ["Alan Turing", "John McCarthy", "Marvin Minsky"], correcta: 1, explicacion: "John McCarthy acuñó el término 'inteligencia artificial' en 1956 y organizó la primera conferencia sobre el tema." }
      ]
    }
  };

  // Configuración inicial
  document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('modo').addEventListener('change', actualizarDescripcionModo);
    cargarCategorias();
    
    // Configurar botones de avatar
    document.querySelectorAll('.avatar').forEach(avatar => {
      avatar.addEventListener('click', function() {
        seleccionarAvatar(this.textContent);
      });
    });
  });

  function cambiarTab(tab) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    
    document.querySelector(`.tab[onclick="cambiarTab('${tab}')"]`).classList.add('active');
    document.getElementById(`tab-${tab}`).classList.add('active');
  }

  function cargarCategorias() {
    const container = document.getElementById('categorias-container');
    container.innerHTML = '';
    
    for (const categoria in bancoPreguntas) {
      const btn = document.createElement('div');
      btn.className = 'categoria-btn';
      btn.textContent = categoria.charAt(0).toUpperCase() + categoria.slice(1);
      btn.dataset.categoria = categoria;
      btn.onclick = function() {
        this.classList.toggle('selected');
        verificarCategoriasSeleccionadas();
      };
      container.appendChild(btn);
    }
  }

  function verificarCategoriasSeleccionadas() {
    const seleccionadas = document.querySelectorAll('#categorias-container .selected');
    document.getElementById('iniciar-juego-btn').disabled = seleccionadas.length < 3;
  }

  function actualizarDescripcionModo() {
    const modo = document.getElementById('modo').value;
    const info = document.getElementById('modo-info');
    
    switch(modo) {
      case 'clasico':
        info.textContent = 'Responde correctamente 10 preguntas. Gana quien más puntos tenga.';
        break;
      case 'contrarreloj':
        info.textContent = 'Tienes 15 segundos por pregunta. ¡Responde rápido! +1 punto extra si respondes antes de 7 segundos.';
        break;
      case 'robo':
        info.textContent = 'Cada acierto roba 1 punto al oponente con más puntos. Estrategia clave para ganar.';
        break;
      case 'suddenDeath':
        info.textContent = 'Un error y pierdes. ¡Precisión ante todo! El último en pie gana.';
        break;
      case 'supervivencia':
        info.textContent = 'Responde hasta fallar. ¿Cuántas preguntas correctas consecutivas puedes lograr?';
        break;
      case 'duelo':
        info.textContent = '1 vs 1 contra el bot más difícil. Gana el primero en llegar a 5 puntos.';
        break;
      case 'equipos':
        info.textContent = '2 vs 2. Trabaja en equipo para ganar. Cada miembro responde alternadamente.';
        break;
    }
  }

  function seleccionarAvatar(emoji) {
    avatarSeleccionado = emoji;
    document.querySelectorAll('.avatar').forEach(a => a.classList.remove('selected'));
    event.target.classList.add('selected');
  }

  function mostrarSeleccionCategorias() {
    const nombre = document.getElementById('nombre').value.trim();
    avatarSeleccionado = document.querySelector('.avatar.selected')?.textContent;
    
    if (!nombre || !avatarSeleccionado) {
      mostrarNotificacion('¡Necesitas un nombre y avatar para jugar!');
      return;
    }
    
    // Guardar configuración
    jugadorHumano = { 
      nombre, 
      avatar: avatarSeleccionado,
      powerups: {
        'tiempo-extra': { disponible: true, cooldown: 3 },
        'doble-puntos': { disponible: true, cooldown: 5 },
        'excluir': { disponible: true, cooldown: 4 }
      }
    };
    
    modoJuego = document.getElementById('modo').value;
    dificultad = document.getElementById('dificultad').value;
    numBots = parseInt(document.getElementById('num-bots').value);
    velocidadJuego = document.getElementById('velocidad').value;
    
    // Mostrar botón de volver
    document.querySelector('.boton-volver').style.display = 'flex';
    
    document.getElementById('inicio').style.display = 'none';
    document.getElementById('categorias').style.display = 'block';
  }

  function iniciarJuego() {
    // Obtener categorías seleccionadas
    const categoriasBtns = document.querySelectorAll('#categorias-container .selected');
    categoriasSeleccionadas = Array.from(categoriasBtns).map(btn => btn.dataset.categoria);
    
    // Configurar juego según modo
    switch(modoJuego) {
      case 'clasico':
        totalPreguntas = 10;
        tiempoTotal = 0; // Sin temporizador
        break;
      case 'contrarreloj':
        totalPreguntas = 15;
        tiempoTotal = 15;
        tiempoRestante = tiempoTotal;
        break;
      case 'robo':
        totalPreguntas = 12;
        tiempoTotal = 20;
        break;
      case 'suddenDeath':
        totalPreguntas = 50; // Máximo posible antes de fallar
        tiempoTotal = 15;
        break;
      case 'supervivencia':
        totalPreguntas = Infinity; // Hasta que el jugador falle
        tiempoTotal = 15;
        break;
      case 'duelo':
        totalPreguntas = 10;
        tiempoTotal = 15;
        numBots = 1; // Solo 1 bot en modo duelo
        break;
      case 'equipos':
        totalPreguntas = 12;
        tiempoTotal = 20;
        numBots = 2; // 2 bots para formar equipos
        break;
    }
    
    // Configurar jugadores
    jugadores = [jugadorHumano];
    
    // Añadir bots según configuración
    for (let i = 1; i <= numBots; i++) {
      const avataresBot = ['🤖', '👾', '🎮', '👽', '🤡', '👻', '🐶', '🐱'];
      jugadores.push({ 
        nombre: `Bot ${i}`, 
        avatar: avataresBot[(i-1) % avataresBot.length],
        esBot: true
      });
    }
    
    // Configurar equipos si es modo equipos
    if (modoJuego === 'equipos') {
      equipos = [
        { miembros: [jugadorHumano, jugadores[1]], puntos: 0 },
        { miembros: [jugadores[2], jugadores[3] || jugadores[1]], puntos: 0 }
      ];
    } else {
      equipos = [];
    }
    
    // Inicializar puntajes
    jugadores.forEach(j => puntajes[j.nombre] = 0);
    
    // Inicializar stats
    stats = {
      preguntasTotales: 0,
      respuestasCorrectas: 0,
      tiempoTotal: 0,
      tiempoPromedio: 0,
      powerupsUsados: 0
    };
    
    // Resetear powerups
    powerups = {
      'tiempo-extra': { disponible: true, cooldown: 3 },
      'doble-puntos': { disponible: true, cooldown: 5 },
      'excluir': { disponible: true, cooldown: 4 }
    };
    usandoDoblePuntos = false;
    
    // Cargar preguntas según categorías y dificultad seleccionadas
    preguntas = [];
    categoriasSeleccionadas.forEach(cat => {
      if (bancoPreguntas[cat] && bancoPreguntas[cat][dificultad]) {
        preguntas.push(...bancoPreguntas[cat][dificultad].map(q => ({ ...q, categoria: cat })));
      }
    });
    
    // Mezclar preguntas
    preguntas = shuffleArray(preguntas);
    preguntasMostradas = [];
    indexPregunta = 0;
    
    // Mostrar pantalla de juego
    document.getElementById('categorias').style.display = 'none';
    document.getElementById('juego').style.display = 'block';
    
    // Configurar velocidad del juego
    let velocidadMultiplier = 1;
    switch(velocidadJuego) {
      case 'lento': velocidadMultiplier = 1.5; break;
      case 'rapido': velocidadMultiplier = 0.7; break;
    }
    
    // Ajustar tiempos según velocidad
    tiempoTotal = Math.round(tiempoTotal * velocidadMultiplier);
    
    // Actualizar UI
    actualizarPuntajes();
    mostrarPregunta();
  }

  function shuffleArray(array) {
    const newArray = [...array];
    for (let i = newArray.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
    }
    return newArray;
  }

  function mostrarPregunta() {
    if (preguntasMostradas.length >= preguntas.length) {
      preguntasMostradas = []; // Reiniciar si hemos mostrado todas
    }
    
    // Encontrar una pregunta no mostrada
    let pregunta;
    for (let i = 0; i < preguntas.length; i++) {
      if (!preguntasMostradas.includes(i)) {
        pregunta = preguntas[i];
        preguntasMostradas.push(i);
        break;
      }
    }
    
    if (!pregunta) return finalizarJuego(); // No hay más preguntas
    
    preguntaActual = pregunta;
    tiempoInicioPregunta = Date.now();
    
    // Actualizar UI
    document.getElementById('pregunta').innerHTML = `
      <div class="categoria-tag">${pregunta.categoria.charAt(0).toUpperCase() + pregunta.categoria.slice(1)} <span class="nivel-dificultad ${dificultad}">${dificultad}</span></div>
      ${pregunta.q}
    `;
    
    // Mezclar respuestas
    const respuestas = [...pregunta.a];
    const correcta = respuestas[pregunta.correcta];
    const respuestasMezcladas = shuffleArray(respuestas);
    const nuevaCorrecta = respuestasMezcladas.indexOf(correcta);
    
    // Mostrar respuestas
    const respuestasContainer = document.getElementById('respuestas');
    respuestasContainer.innerHTML = '';
    
    const letras = ['A', 'B', 'C'];
    respuestasMezcladas.forEach((r, i) => {
      const respuestaElement = document.createElement('div');
      respuestaElement.className = 'respuesta';
      respuestaElement.innerHTML = `
        <div class="letra-respuesta">${letras[i]}</div>
        <div>${r}</div>
      `;
      respuestaElement.onclick = () => verificarRespuesta(i, nuevaCorrecta);
      respuestasContainer.appendChild(respuestaElement);
    });
    
    // Actualizar progreso
    const progreso = (indexPregunta / (modoJuego === 'supervivencia' ? indexPregunta + 5 : totalPreguntas)) * 100;
    document.getElementById('pregunta-progreso-bar').style.width = `${Math.min(100, progreso)}%`;
    
    let textoProgreso = '';
    if (modoJuego === 'supervivencia') {
      textoProgreso = `Racha: ${indexPregunta} correctas`;
    } else if (modoJuego === 'duelo') {
      textoProgreso = `Pregunta ${indexPregunta + 1} | Primer jugador en 5 puntos gana`;
    } else if (modoJuego === 'equipos') {
      textoProgreso = `Pregunta ${indexPregunta + 1} de ${totalPreguntas} | Equipo: ${equipos[0].puntos} - ${equipos[1].puntos}`;
    } else {
      textoProgreso = `Pregunta ${indexPregunta + 1} de ${totalPreguntas}`;
    }
    document.getElementById('pregunta-progreso').textContent = textoProgreso;
    
    // Configurar temporizador si es necesario
    if (tiempoTotal > 0) {
      tiempoRestante = tiempoTotal;
      actualizarTemporizador();
      clearInterval(temporizador);
      temporizador = setInterval(() => {
        tiempoRestante--;
        actualizarTemporizador();
        
        // Sonido de cuenta regresiva para los últimos 5 segundos
        if (tiempoRestante <= 5 && tiempoRestante > 0) {
          document.getElementById('countdown-sound').currentTime = 0;
          document.getElementById('countdown-sound').play();
        }
        
        if (tiempoRestante <= 0) {
          clearInterval(temporizador);
          verificarRespuesta(-1, nuevaCorrecta);
        }
      }, 1000);
    }
    
    // Actualizar powerups
    actualizarPowerups();
    
    // Simular respuesta de bots después de un retraso
    if (modoJuego !== 'duelo' && modoJuego !== 'equipos') {
      jugadores.filter(j => j.esBot).forEach(bot => {
        const delay = Math.random() * (tiempoTotal * 1000 * 0.8) + 1000; // Entre 1s y 80% del tiempo total
        setTimeout(() => {
          if (preguntaActual && document.getElementById('respuestas').children.length > 0) {
            const correcta = preguntaActual.correcta;
            const probabilidadAcierto = dificultad === 'facil' ? 0.8 : 
                                        dificultad === 'medio' ? 0.65 : 
                                        dificultad === 'dificil' ? 0.5 : 0.35;
            
            const esCorrecta = Math.random() < probabilidadAcierto;
            const respuestaElegida = esCorrecta ? correcta : Math.floor(Math.random() * 3);
            
            // Mostrar que el bot está pensando
            const botElement = document.querySelector(`.jugador-puntaje .jugador-nombre:contains('${bot.nombre}')`);
            if (botElement) {
              botElement.classList.add('bot-thinking');
              setTimeout(() => {
                botElement.classList.remove('bot-thinking');
              }, 1000);
            }
            
            // Actualizar puntaje del bot
            if (esCorrecta) {
              puntajes[bot.nombre]++;
              actualizarPuntajes();
            }
          }
        }, delay);
      });
    }
  }

  function actualizarTemporizador() {
    const porcentaje = (tiempoRestante / tiempoTotal) * 100;
    document.getElementById('temporizador-bar').style.width = `${porcentaje}%`;
    document.getElementById('tiempo-texto').textContent = `${tiempoRestante}s`;
    
    // Cambiar color cuando el tiempo es crítico
    if (tiempoRestante <= 5) {
      document.getElementById('temporizador-bar').style.background = 'linear-gradient(to right, var(--incorrect), var(--incorrect-dark))';
    } else {
      document.getElementById('temporizador-bar').style.background = 'linear-gradient(to right, var(--accent), var(--secondary))';
    }
  }

  function verificarRespuesta(opcion, correcta) {
    const tiempoRespuesta = (Date.now() - tiempoInicioPregunta) / 1000;
    stats.tiempoTotal += tiempoRespuesta;
    stats.preguntasTotales++;
    
    clearInterval(temporizador);
    
    // Deshabilitar todas las respuestas
    const respuestas = document.querySelectorAll('.respuesta');
    respuestas.forEach(r => r.style.pointerEvents = 'none');
    
    // Marcar respuestas correcta e incorrecta
    respuestas.forEach((r, i) => {
      if (i === correcta) {
        r.classList.add('correcta');
        // Mostrar explicación si existe
        if (preguntaActual.explicacion) {
          const explicacion = document.createElement('div');
          explicacion.className = 'explicacion';
          explicacion.textContent = preguntaActual.explicacion;
          r.appendChild(explicacion);
        }
      } else if (i === opcion) {
        r.classList.add('incorrecta');
      }
    });
    
    // Determinar si la respuesta fue correcta
    const esCorrecta = opcion === correcta;
    const resultadoElement = document.getElementById('resultado');
    
    // Reproducir sonido
    const sound = esCorrecta ? document.getElementById('correct-sound') : document.getElementById('incorrect-sound');
    sound.currentTime = 0;
    sound.play();
    
    // Actualizar stats
    if (esCorrecta) {
      stats.respuestasCorrectas++;
    }
    
    // Actualizar puntajes según el modo de juego
    if (esCorrecta) {
      let puntos = 1;
      let mensaje = `✅ Correcto! +${puntos} punto`;
      
      // Bonus por rapidez en modo contrarreloj
      if (modoJuego === 'contrarreloj' && tiempoRespuesta < tiempoTotal / 2) {
        puntos += 1;
        mensaje = `✅ ¡Rápido y correcto! +${puntos} puntos`;
      }
      
      // Bonus por doble puntos activo
      if (usandoDoblePuntos) {
        puntos *= 2;
        mensaje = `🎯 ¡Doble puntos! +${puntos} puntos`;
        usandoDoblePuntos = false;
      }
      
      // Modo robo
      if (modoJuego === 'robo') {
        const jugadorMasPuntos = Object.entries(puntajes)
          .filter(([nombre]) => nombre !== jugadorHumano.nombre)
          .sort((a, b) => b[1] - a[1])[0];
        
        if (jugadorMasPuntos && jugadorMasPuntos[1] > 0) {
          puntajes[jugadorMasPuntos[0]]--;
          puntos++;
          mensaje = `✅ ¡Robaste un punto! +${puntos} puntos`;
        }
      }
      
      // Modo equipos
      if (modoJuego === 'equipos') {
        const equipoJugador = equipos.find(e => e.miembros.includes(jugadorHumano));
        equipoJugador.puntos += puntos;
        mensaje = `✅ ¡Punto para tu equipo! (Total: ${equipoJugador.puntos})`;
      } else {
        puntajes[jugadorHumano.nombre] += puntos;
      }
      
      resultadoElement.textContent = mensaje;
      resultadoElement.className = 'correct-message';
    } else {
      if (modoJuego === 'suddenDeath') {
        resultadoElement.textContent = '💀 ¡Has fallado! Juego terminado.';
        resultadoElement.className = 'incorrect-message';
        document.getElementById('lose-sound').play();
        setTimeout(finalizarJuego, 2000);
        return;
      }
      
      resultadoElement.textContent = `❌ Incorrecto. La respuesta correcta era: ${preguntaActual.a[preguntaActual.correcta]}`;
      resultadoElement.className = 'incorrect-message';
    }
    
    actualizarPuntajes();
    
    // Avanzar a siguiente pregunta o finalizar juego
    indexPregunta++;
    
    // Verificar condiciones de victoria
    if (modoJuego === 'duelo' && (puntajes[jugadorHumano.nombre] >= 5 || Math.max(...Object.values(puntajes)) >= 5)) {
      setTimeout(finalizarJuego, 2000);
      return;
    }
    
    if (modoJuego === 'equipos' && (equipos[0].puntos >= 7 || equipos[1].puntos >= 7)) {
      setTimeout(finalizarJuego, 2000);
      return;
    }
    
    if (modoJuego !== 'supervivencia' && indexPregunta >= totalPreguntas) {
      setTimeout(finalizarJuego, 2000);
      return;
    }
    
    setTimeout(mostrarPregunta, esCorrecta ? 2000 : 3000);
  }

  function actualizarPuntajes() {
    const contenedor = document.getElementById('puntajes');
    contenedor.innerHTML = '';
    
    // Ordenar jugadores por puntaje o mostrar equipos
    if (modoJuego === 'equipos') {
      equipos.forEach((equipo, index) => {
        const elemento = document.createElement('div');
        elemento.className = `jugador-puntaje ${index === 0 ? 'leader' : ''}`;
        
        const miembrosHTML = equipo.miembros.map(m => `
          <div style="display: flex; align-items: center; margin-bottom: 5px;">
            <div style="font-size: 1.5rem; margin-right: 10px;">${m.avatar}</div>
            <div>${m.nombre}</div>
          </div>
        `).join('');
        
        elemento.innerHTML = `
          <div style="margin-bottom: 10px; font-weight: bold;">Equipo ${index + 1}</div>
          ${miembrosHTML}
          <div class="jugador-puntos">${equipo.puntos} pts</div>
        `;
        
        contenedor.appendChild(elemento);
      });
    } else {
      const jugadoresOrdenados = [...jugadores].sort((a, b) => puntajes[b.nombre] - puntajes[a.nombre]);
      
      jugadoresOrdenados.forEach((jugador, index) => {
        const elemento = document.createElement('div');
        elemento.className = `jugador-puntaje ${index < 3 && puntajes[jugador.nombre] > 0 ? 'leader' : ''}`;
        
        elemento.innerHTML = `
          <div class="jugador-avatar">${jugador.avatar}</div>
          <div class="jugador-nombre">${jugador.nombre} ${jugador.esBot ? '<span style="font-size:0.7em; opacity:0.7;">(bot)</span>' : ''}</div>
          <div class="jugador-puntos">${puntajes[jugador.nombre]} pts</div>
        `;
        
        contenedor.appendChild(elemento);
      });
    }
  }

  function actualizarPowerups() {
    const powerupElements = document.querySelectorAll('.powerup');
    
    Object.keys(powerups).forEach((key, index) => {
      const powerup = powerups[key];
      const element = powerupElements[index];
      
      if (powerup.disponible) {
        element.style.opacity = '1';
        element.style.pointerEvents = 'auto';
        element.querySelector('.powerup-cooldown').textContent = 'Disponible';
      } else {
        element.style.opacity = '0.6';
        element.style.pointerEvents = 'none';
        element.querySelector('.powerup-cooldown').textContent = `Enfriamiento: ${powerup.cooldown}`;
      }
    });
  }

  function usarPowerup(tipo) {
    if (!powerups[tipo].disponible) return;
    
    document.getElementById('powerup-sound').play();
    
    switch(tipo) {
      case 'tiempo-extra':
        tiempoRestante += 5;
        if (tiempoRestante > tiempoTotal) tiempoRestante = tiempoTotal;
        actualizarTemporizador();
        mostrarNotificacion('+5 segundos añadidos al temporizador');
        break;
        
      case 'doble-puntos':
        usandoDoblePuntos = true;
        mostrarNotificacion('Próxima respuesta correcta valdrá doble puntos');
        break;
        
      case 'excluir':
        const respuestas = document.querySelectorAll('.respuesta:not(.correcta)');
        if (respuestas.length > 1) {
          const excluirIndex = Math.floor(Math.random() * respuestas.length);
          respuestas[excluirIndex].style.opacity = '0.3';
          respuestas[excluirIndex].style.pointerEvents = 'none';
          mostrarNotificacion('Una respuesta incorrecta ha sido excluida');
        }
        break;
    }
    
    // Activar cooldown
    powerups[tipo].disponible = false;
    actualizarPowerups();
    
    // Manejar cooldown
    const cooldownInterval = setInterval(() => {
      powerups[tipo].cooldown--;
      
      if (powerups[tipo].cooldown <= 0) {
        powerups[tipo].disponible = true;
        powerups[tipo].cooldown = tipo === 'doble-puntos' ? 5 : tipo === 'tiempo-extra' ? 3 : 4;
        actualizarPowerups();
        clearInterval(cooldownInterval);
      } else {
        document.querySelector(`.powerup[onclick="usarPowerup('${tipo}')"] .powerup-cooldown`).textContent = `Enfriamiento: ${powerups[tipo].cooldown}`;
      }
    }, 1000);
    
    stats.powerupsUsados++;
  }

  function finalizarJuego() {
    clearInterval(temporizador);
    
    document.getElementById('juego').style.display = 'none';
    document.getElementById('final').style.display = 'block';
    
    // Determinar ganador(es)
    let ganadores = [];
    if (modoJuego === 'equipos') {
      const maxPuntos = Math.max(...equipos.map(e => e.puntos));
      ganadores = equipos.filter(e => e.puntos === maxPuntos).flatMap(e => e.miembros.map(m => m.nombre));
    } else {
      const maxPuntaje = Math.max(...Object.values(puntajes));
      ganadores = Object.entries(puntajes).filter(([_, p]) => p === maxPuntaje).map(([n]) => n);
    }
    
    // Reproducir sonido de victoria/derrota
    if (ganadores.includes(jugadorHumano.nombre)) {
      document.getElementById('win-sound').play();
    } else {
      document.getElementById('lose-sound').play();
    }
    
    // Mostrar podio
    const podium = document.getElementById('podium');
    podium.innerHTML = '';
    
    // Ordenar jugadores/equipos por puntaje (top 3)
    let topRanking = [];
    if (modoJuego === 'equipos') {
      topRanking = [...equipos].sort((a, b) => b.puntos - a.puntos).slice(0, 3);
    } else {
      topRanking = [...jugadores].sort((a, b) => puntajes[b.nombre] - puntajes[a.nombre]).slice(0, 3);
    }
    
    // Crear podio
    const lugares = ['first-place', 'second-place', 'third-place'];
    const medallas = ['🥇', '🥈', '🥉'];
    
    topRanking.forEach((item, index) => {
      if ((modoJuego === 'equipos' && item.puntos === 0) || (modoJuego !== 'equipos' && puntajes[item.nombre] === 0)) return;
      
      const lugar = document.createElement('div');
      lugar.className = 'podium-place';
      
      if (modoJuego === 'equipos') {
        const miembrosHTML = item.miembros.map(m => `
          <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 5px;">
            <div style="font-size: 1.5rem; margin-right: 10px;">${m.avatar}</div>
            <div>${m.nombre}</div>
          </div>
        `).join('');
        
        lugar.innerHTML = `
          <div class="podium-stand ${lugares[index]}">
            <div class="medal">${medallas[index]}</div>
          </div>
          <div class="podium-player">
            <div style="font-weight: bold; margin-bottom: 10px;">Equipo ${index + 1}</div>
            ${miembrosHTML}
            <div class="podium-points">${item.puntos} pts</div>
          </div>
        `;
      } else {
        lugar.innerHTML = `
          <div class="podium-stand ${lugares[index]}">
            <div class="medal">${medallas[index]}</div>
          </div>
          <div class="podium-player">
            <div class="podium-avatar">${item.avatar}</div>
            <div class="podium-name">${item.nombre}</div>
            <div class="podium-points">${puntajes[item.nombre]} pts</div>
          </div>
        `;
      }
      
      podium.appendChild(lugar);
    });
    
    // Mostrar estadísticas
    document.getElementById('stats-preguntas').textContent = stats.preguntasTotales;
    document.getElementById('stats-precision').textContent = `${Math.round((stats.respuestasCorrectas / stats.preguntasTotales) * 100)}%`;
    
    if (modoJuego === 'equipos') {
      document.getElementById('stats-max-puntos').textContent = Math.max(...equipos.map(e => e.puntos));
    } else {
      document.getElementById('stats-max-puntos').textContent = Math.max(...Object.values(puntajes));
    }
    
    document.getElementById('stats-tiempo').textContent = `${(stats.tiempoTotal / stats.preguntasTotales).toFixed(1)}s`;
    
    // Efecto de confeti
    for (let i = 0; i < 100; i++) {
      crearConfeti();
    }
  }

  function crearConfeti() {
    const confetti = document.createElement('div');
    confetti.className = 'confetti';
    confetti.style.left = `${Math.random() * 100}%`;
    confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
    confetti.style.width = `${Math.random() * 10 + 5}px`;
    confetti.style.height = `${Math.random() * 10 + 5}px`;
    confetti.style.animationDuration = `${Math.random() * 3 + 2}s`;
    
    document.body.appendChild(confetti);
    
    setTimeout(() => {
      confetti.remove();
    }, 5000);
  }

  function reiniciarJuego() {
    // Mantener configuración pero reiniciar estado del juego
    indexPregunta = 0;
    preguntasMostradas = [];
    
    // Reiniciar puntajes
    jugadores.forEach(j => puntajes[j.nombre] = 0);
    if (modoJuego === 'equipos') {
      equipos.forEach(e => e.puntos = 0);
    }
    
    // Reiniciar stats
    stats = {
      preguntasTotales: 0,
      respuestasCorrectas: 0,
      tiempoTotal: 0,
      powerupsUsados: 0
    };
    
    // Reiniciar powerups
    powerups = {
      'tiempo-extra': { disponible: true, cooldown: 3 },
      'doble-puntos': { disponible: true, cooldown: 5 },
      'excluir': { disponible: true, cooldown: 4 }
    };
    usandoDoblePuntos = false;
    
    document.getElementById('final').style.display = 'none';
    document.getElementById('juego').style.display = 'block';
    
    mostrarPregunta();
  }

  function volverAlInicio() {
    document.querySelector('.boton-volver').style.display = 'none';
    document.getElementById('final').style.display = 'none';
    document.getElementById('juego').style.display = 'none';
    document.getElementById('categorias').style.display = 'none';
    document.getElementById('inicio').style.display = 'block';
  }

  function mostrarNotificacion(mensaje) {
    const notificacion = document.createElement('div');
    notificacion.style.position = 'fixed';
    notificacion.style.top = '20px';
    notificacion.style.left = '50%';
    notificacion.style.transform = 'translateX(-50%)';
    notificacion.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
    notificacion.style.color = 'white';
    notificacion.style.padding = '10px 20px';
    notificacion.style.borderRadius = '5px';
    notificacion.style.zIndex = '1000';
    notificacion.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.3)';
    notificacion.textContent = mensaje;
    
    document.body.appendChild(notificacion);
    
    setTimeout(() => {
      notificacion.style.opacity = '0';
      setTimeout(() => {
        notificacion.remove();
      }, 500);
    }, 3000);
  }
</script>
</body>
</html> 
